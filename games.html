<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games - Chris Kaplan</title>
    <meta name="description" content="Play tic-tac-toe and other games on Chris Kaplan's website">
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ“</text></svg>">
    <style>
        /* Tic Tac Toe Game Styles */
        .game-container {
            max-width: 600px;
            margin: 2rem auto;
            text-align: center;
        }

        .game-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .game-info {
            margin-bottom: 2rem;
            color: var(--text-secondary);
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 2rem;
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 15px;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .score {
            text-align: center;
        }

        .score h3 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .score span {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 300px;
            margin: 0 auto 2rem;
            background: var(--bg-primary);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow);
        }

        .cell {
            width: 80px;
            height: 80px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: var(--transition);
            color: var(--text-primary);
        }

        .cell:hover {
            background: var(--accent-light);
            transform: scale(1.05);
        }

        .cell.x {
            color: var(--accent-color);
        }

        .cell.o {
            color: var(--success-color);
        }

        .game-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .game-btn {
            padding: 0.75rem 1.5rem;
            background: var(--gradient-accent);
            color: white;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .game-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }

        .game-btn.secondary {
            background: var(--gradient-secondary);
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
        }

        .game-btn.secondary:hover {
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.4);
        }

        .winner-message {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--gradient-primary);
            color: white;
            border-radius: 15px;
            font-weight: 600;
            display: none;
        }

        .winner-message.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .game-instructions {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px var(--shadow);
        }

        .game-instructions h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .game-instructions p {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <svg id="sunIcon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
        <svg id="moonIcon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
        <span id="themeText">Light</span>
    </button>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo" id="siteName">Loading...</a>
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">â˜°</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html" id="navHome">Home</a></li>
                <li><a href="about.html" id="navAbout">About</a></li>
                <li><a href="games.html" class="active" id="navGames">Games</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <div class="container">
            <div class="loading" id="loading">
                <div class="spinner"></div>
            </div>
            
            <div id="gamesContent" style="display: none;">
                <section class="section">
                    <h2 id="gamesTitle">Games</h2>
                    <p id="gamesDescription" style="text-align: center; max-width: 600px; margin: 0 auto 3rem;">Take a break and enjoy some fun games! Challenge yourself with tic-tac-toe.</p>
                    
                    <div class="game-container">
                        <h3 class="game-title">ðŸŽ® Tic Tac Toe</h3>
                        
                        <div class="game-instructions">
                            <h3>How to Play</h3>
                            <p>â€¢ Player X goes first</p>
                            <p>â€¢ Take turns clicking on empty cells</p>
                            <p>â€¢ Get 3 in a row (horizontal, vertical, or diagonal) to win!</p>
                            <p>â€¢ If all cells are filled with no winner, it's a tie</p>
                        </div>

                        <div class="score-board">
                            <div class="score">
                                <h3>Player X</h3>
                                <span id="scoreX">0</span>
                            </div>
                            <div class="score">
                                <h3>Ties</h3>
                                <span id="scoreTie">0</span>
                            </div>
                            <div class="score">
                                <h3>Player O</h3>
                                <span id="scoreO">0</span>
                            </div>
                        </div>

                        <div class="board" id="board">
                            <div class="cell" data-index="0"></div>
                            <div class="cell" data-index="1"></div>
                            <div class="cell" data-index="2"></div>
                            <div class="cell" data-index="3"></div>
                            <div class="cell" data-index="4"></div>
                            <div class="cell" data-index="5"></div>
                            <div class="cell" data-index="6"></div>
                            <div class="cell" data-index="7"></div>
                            <div class="cell" data-index="8"></div>
                        </div>

                        <div class="game-controls">
                            <button class="game-btn" id="resetBtn">ðŸ”„ New Game</button>
                            <button class="game-btn secondary" id="clearScoresBtn">ðŸ“Š Clear Scores</button>
                        </div>

                        <div class="winner-message" id="winnerMessage"></div>
                    </div>
                </section>
                
                <section class="contact-section">
                    <h2 id="contactTitle">Enjoyed the Game?</h2>
                    <p id="contactDescription">I'm always excited to discuss games, programming, or anything else! Feel free to reach out if you'd like to connect!</p>
                    
                    <div class="btn-group">
                        <a href="mailto:ckaplan@nd.edu" class="btn" id="contactEmailBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            <span id="emailText">Send me an email</span>
                        </a>
                        <a href="https://www.linkedin.com/in/christopherkaplanr/" target="_blank" rel="noopener noreferrer" class="btn btn-outline" id="contactLinkedinBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                            <span id="linkedinText">Connect on LinkedIn</span>
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p id="footerText">Â© 2024 Chris Kaplan. Built with HTML, CSS, and JavaScript.</p>
        </div>
    </footer>

    <script>
        // Theme Management
        class ThemeManager {
            constructor() {
                this.themeToggle = document.getElementById('themeToggle');
                this.sunIcon = document.getElementById('sunIcon');
                this.moonIcon = document.getElementById('moonIcon');
                this.themeText = document.getElementById('themeText');
                
                this.init();
            }
            
            init() {
                // Load saved theme or default to light
                const savedTheme = localStorage.getItem('theme') || 'light';
                this.setTheme(savedTheme);
                
                this.themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    this.setTheme(newTheme);
                });
            }
            
            setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                
                if (theme === 'dark') {
                    this.sunIcon.style.display = 'none';
                    this.moonIcon.style.display = 'block';
                    this.themeText.textContent = 'Dark';
                } else {
                    this.sunIcon.style.display = 'block';
                    this.moonIcon.style.display = 'none';
                    this.themeText.textContent = 'Light';
                }
            }
        }

        // Content Manager
        class ContentManager {
            constructor() {
                this.siteData = null;
                this.init();
            }
            
            async init() {
                try {
                    await this.loadContent();
                    this.renderContent();
                } catch (error) {
                    console.error('Error loading content:', error);
                    this.showError();
                }
            }
            
            async loadContent() {
                const response = await fetch('assets/site-copy.json');
                if (!response.ok) {
                    throw new Error('Failed to load content');
                }
                this.siteData = await response.json();
            }
            
            renderContent() {
                // Hide loading spinner
                document.getElementById('loading').style.display = 'none';
                document.getElementById('gamesContent').style.display = 'block';
                
                // Update navigation
                document.getElementById('siteName').textContent = this.siteData.site.name;
                document.getElementById('navHome').textContent = this.siteData.navigation.home;
                document.getElementById('navAbout').textContent = this.siteData.navigation.about;
                document.getElementById('navGames').textContent = this.siteData.navigation.games;
                
                // Update games content
                document.getElementById('gamesTitle').textContent = this.siteData.navigation.games;
                
                // Update contact section
                document.getElementById('contactTitle').textContent = 'Enjoyed the Game?';
                document.getElementById('contactDescription').textContent = "I'm always excited to discuss games, programming, or anything else! Feel free to reach out if you'd like to connect!";
                document.getElementById('emailText').textContent = this.siteData.contact.email_text;
                document.getElementById('linkedinText').textContent = this.siteData.contact.linkedin_text;
                
                // Update footer
                document.getElementById('footerText').textContent = this.siteData.footer.text;
                
                // Update page title
                document.title = `${this.siteData.navigation.games} - ${this.siteData.site.name}`;
            }
            
            showError() {
                document.getElementById('loading').innerHTML = '<p>Error loading content. Please refresh the page.</p>';
            }
        }

        // Tic Tac Toe Game
        class TicTacToe {
            constructor() {
                this.board = ['', '', '', '', '', '', '', '', ''];
                this.currentPlayer = 'X';
                this.gameActive = true;
                this.scores = {
                    X: parseInt(localStorage.getItem('ticTacToeScoreX')) || 0,
                    O: parseInt(localStorage.getItem('ticTacToeScoreO')) || 0,
                    tie: parseInt(localStorage.getItem('ticTacToeScoreTie')) || 0
                };
                
                this.winningConditions = [
                    [0, 1, 2],
                    [3, 4, 5],
                    [6, 7, 8],
                    [0, 3, 6],
                    [1, 4, 7],
                    [2, 5, 8],
                    [0, 4, 8],
                    [2, 4, 6]
                ];
                
                this.init();
            }
            
            init() {
                this.updateScoreDisplay();
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                const cells = document.querySelectorAll('.cell');
                cells.forEach(cell => {
                    cell.addEventListener('click', (e) => this.handleCellClick(e));
                });
                
                document.getElementById('resetBtn').addEventListener('click', () => this.resetGame());
                document.getElementById('clearScoresBtn').addEventListener('click', () => this.clearScores());
            }
            
            handleCellClick(e) {
                const cell = e.target;
                const index = parseInt(cell.dataset.index);
                
                if (this.board[index] !== '' || !this.gameActive) {
                    return;
                }
                
                this.makeMove(index);
            }
            
            makeMove(index) {
                this.board[index] = this.currentPlayer;
                this.updateCell(index);
                
                if (this.checkWinner()) {
                    this.endGame(`${this.currentPlayer} Wins! ðŸŽ‰`);
                    this.scores[this.currentPlayer]++;
                } else if (this.checkTie()) {
                    this.endGame("It's a Tie! ðŸ¤");
                    this.scores.tie++;
                } else {
                    this.currentPlayer = this.currentPlayer === 'X' ? 'O' : 'X';
                }
                
                this.saveScores();
                this.updateScoreDisplay();
            }
            
            updateCell(index) {
                const cell = document.querySelector(`[data-index="${index}"]`);
                cell.textContent = this.currentPlayer;
                cell.classList.add(this.currentPlayer.toLowerCase());
            }
            
            checkWinner() {
                return this.winningConditions.some(condition => {
                    return condition.every(index => {
                        return this.board[index] === this.currentPlayer;
                    });
                });
            }
            
            checkTie() {
                return this.board.every(cell => cell !== '');
            }
            
            endGame(message) {
                this.gameActive = false;
                const winnerMessage = document.getElementById('winnerMessage');
                winnerMessage.textContent = message;
                winnerMessage.classList.add('show');
            }
            
            resetGame() {
                this.board = ['', '', '', '', '', '', '', '', ''];
                this.currentPlayer = 'X';
                this.gameActive = true;
                
                const cells = document.querySelectorAll('.cell');
                cells.forEach(cell => {
                    cell.textContent = '';
                    cell.classList.remove('x', 'o');
                });
                
                const winnerMessage = document.getElementById('winnerMessage');
                winnerMessage.classList.remove('show');
            }
            
            clearScores() {
                this.scores = { X: 0, O: 0, tie: 0 };
                this.saveScores();
                this.updateScoreDisplay();
            }
            
            updateScoreDisplay() {
                document.getElementById('scoreX').textContent = this.scores.X;
                document.getElementById('scoreO').textContent = this.scores.O;
                document.getElementById('scoreTie').textContent = this.scores.tie;
            }
            
            saveScores() {
                localStorage.setItem('ticTacToeScoreX', this.scores.X);
                localStorage.setItem('ticTacToeScoreO', this.scores.O);
                localStorage.setItem('ticTacToeScoreTie', this.scores.tie);
            }
        }

        // Mobile Navigation
        class MobileNav {
            constructor() {
                this.navToggle = document.getElementById('navToggle');
                this.navLinks = document.getElementById('navLinks');
                
                this.navToggle.addEventListener('click', () => {
                    this.navLinks.classList.toggle('active');
                });
                
                // Close nav when clicking on a link
                this.navLinks.addEventListener('click', (e) => {
                    if (e.target.tagName === 'A') {
                        this.navLinks.classList.remove('active');
                    }
                });
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ThemeManager();
            new ContentManager();
            new MobileNav();
            new TicTacToe();
        });
    </script>
</body>
</html>
