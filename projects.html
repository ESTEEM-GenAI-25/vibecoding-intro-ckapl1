<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Chris Kaplan</title>
    <meta name="description" content="View Chris Kaplan's projects and work in the ESTEEM program">
    <link rel="stylesheet" href="assets/styles.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽ“</text></svg>">
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <svg id="sunIcon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
        <svg id="moonIcon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
        <span id="themeText">Light</span>
    </button>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo" id="siteName">Loading...</a>
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">â˜°</button>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html" id="navHome">Home</a></li>
                <li><a href="about.html" id="navAbout">About</a></li>
                <li><a href="projects.html" class="active" id="navProjects">Projects</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <div class="container">
            <div class="loading" id="loading">
                <div class="spinner"></div>
            </div>
            
            <div id="projectsContent" style="display: none;">
                <section class="section">
                    <h2 id="projectsTitle">Projects & Work</h2>
                    <p id="projectsDescription" style="text-align: center; max-width: 600px; margin: 0 auto 3rem;">Here are some of the projects and work I've been involved with during my studies and career.</p>
                    
                    <div class="projects-grid" id="projectsGrid">
                        <!-- Projects will be dynamically loaded here -->
                    </div>
                </section>
                
                <section class="contact-section">
                    <h2 id="contactTitle">Interested in My Work?</h2>
                    <p id="contactDescription">I'm always excited to discuss my projects and research. Feel free to reach out if you'd like to learn more!</p>
                    
                    <div class="btn-group">
                        <a href="mailto:ckaplan@nd.edu" class="btn" id="contactEmailBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                <polyline points="22,6 12,13 2,6"/>
                            </svg>
                            <span id="emailText">Send me an email</span>
                        </a>
                        <a href="https://www.linkedin.com/in/christopherkaplanr/" target="_blank" rel="noopener noreferrer" class="btn btn-outline" id="contactLinkedinBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                            </svg>
                            <span id="linkedinText">Connect on LinkedIn</span>
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p id="footerText">Â© 2024 Chris Kaplan. Built with HTML, CSS, and JavaScript.</p>
        </div>
    </footer>

    <script>
        // Theme Management
        class ThemeManager {
            constructor() {
                this.themeToggle = document.getElementById('themeToggle');
                this.sunIcon = document.getElementById('sunIcon');
                this.moonIcon = document.getElementById('moonIcon');
                this.themeText = document.getElementById('themeText');
                
                this.init();
            }
            
            init() {
                // Load saved theme or default to light
                const savedTheme = localStorage.getItem('theme') || 'light';
                this.setTheme(savedTheme);
                
                this.themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    this.setTheme(newTheme);
                });
            }
            
            setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
                
                if (theme === 'dark') {
                    this.sunIcon.style.display = 'none';
                    this.moonIcon.style.display = 'block';
                    this.themeText.textContent = 'Dark';
                } else {
                    this.sunIcon.style.display = 'block';
                    this.moonIcon.style.display = 'none';
                    this.themeText.textContent = 'Light';
                }
            }
        }

        // Content Manager
        class ContentManager {
            constructor() {
                this.siteData = null;
                this.init();
            }
            
            async init() {
                try {
                    await this.loadContent();
                    this.renderContent();
                } catch (error) {
                    console.error('Error loading content:', error);
                    this.showError();
                }
            }
            
            async loadContent() {
                const response = await fetch('assets/site-copy.json');
                if (!response.ok) {
                    throw new Error('Failed to load content');
                }
                this.siteData = await response.json();
            }
            
            renderContent() {
                // Hide loading spinner
                document.getElementById('loading').style.display = 'none';
                document.getElementById('projectsContent').style.display = 'block';
                
                // Update navigation
                document.getElementById('siteName').textContent = this.siteData.site.name;
                document.getElementById('navHome').textContent = this.siteData.navigation.home;
                document.getElementById('navAbout').textContent = this.siteData.navigation.about;
                document.getElementById('navProjects').textContent = this.siteData.navigation.projects;
                
                // Update projects content
                document.getElementById('projectsTitle').textContent = this.siteData.projects.title;
                document.getElementById('projectsDescription').textContent = this.siteData.projects.description;
                
                // Render projects
                this.renderProjects();
                
                // Update contact section
                document.getElementById('contactTitle').textContent = 'Interested in My Work?';
                document.getElementById('contactDescription').textContent = "I'm always excited to discuss my projects and research. Feel free to reach out if you'd like to learn more!";
                document.getElementById('emailText').textContent = this.siteData.contact.email_text;
                document.getElementById('linkedinText').textContent = this.siteData.contact.linkedin_text;
                
                // Update footer
                document.getElementById('footerText').textContent = this.siteData.footer.text;
                
                // Update page title
                document.title = `Projects - ${this.siteData.site.name}`;
            }
            
            renderProjects() {
                const projectsGrid = document.getElementById('projectsGrid');
                projectsGrid.innerHTML = '';
                
                this.siteData.projects.items.forEach(project => {
                    const projectCard = document.createElement('div');
                    projectCard.className = 'project-card';
                    
                    const statusClass = project.status.toLowerCase().replace(' ', '-');
                    
                    projectCard.innerHTML = `
                        <div class="project-status status-${statusClass}">${project.status}</div>
                        <h3>${project.title}</h3>
                        <p>${project.description}</p>
                        <div class="project-tech">
                            ${project.technologies.map(tech => `<span class="tech-tag">${tech}</span>`).join('')}
                        </div>
                    `;
                    
                    projectsGrid.appendChild(projectCard);
                });
            }
            
            showError() {
                document.getElementById('loading').innerHTML = '<p>Error loading content. Please refresh the page.</p>';
            }
        }

        // Mobile Navigation
        class MobileNav {
            constructor() {
                this.navToggle = document.getElementById('navToggle');
                this.navLinks = document.getElementById('navLinks');
                
                this.navToggle.addEventListener('click', () => {
                    this.navLinks.classList.toggle('active');
                });
                
                // Close nav when clicking on a link
                this.navLinks.addEventListener('click', (e) => {
                    if (e.target.tagName === 'A') {
                        this.navLinks.classList.remove('active');
                    }
                });
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ThemeManager();
            new ContentManager();
            new MobileNav();
        });
    </script>
</body>
</html>